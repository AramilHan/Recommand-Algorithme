# 推荐算法

## itemcf 物品协同过滤

### 1. 计算物品之间的相似度。

  那么我们要如何确定物品之间的相似度呢，根据物品历史被喜欢的情况，假如某两个物品历史共同被许多用户喜欢，则说明这两个物品是相似的。假设喜欢物品 a 的用户数为 N(a)，喜欢物品 b 的用户数为 N(b)，那么 a 与 b 的相似度为：

![公式](https://www.zhihu.com/equation?tex=Wab%3D%5Cfrac%7B%5Cleft%7C+N%28a%29%5Ccap+N%28b%29+%5Cright%7C%7D%7B%5Cleft%7C+N%28a%29+%5Cright%7C%7D)

 上述公式可以理解为喜欢 A 物品的用户中，有多少比例的用户也喜欢 B，比例越高，说明 A与 B的相似度越高。但是这样的公式有一个问题，如果物品 B很热门，很多人都喜欢，那么相似度就会无限接近1，这样就会造成所有的物品拿出来，都与 B 有极高的相似度，这样就没有办法证明物品之间的相似度是可靠的了。

![公式](https://www.zhihu.com/equation?tex=Wab%3D%5Cfrac%7B%5Cleft%7C+N%28a%29%5Ccap+N%28b%29+%5Cright%7C%7D%7B%5Csqrt%7B%5Cleft%7C+N%28a%29+%5Cright%7C%5Cleft%7C+N%28b%29+%5Cright%7C%7D%7D)

### 2. 根据物品的相似度和用户的历史行为给用户推荐。
获得了物品的相似度后，则根据以下公式来计算用户 u 对物品 b 的兴趣：


![公式](https://www.zhihu.com/equation?tex=Pub%3D%5Csum_%7Ba%5Cepsilon+N%28u%29%5Ccap+S%28b%2CK%29%7D%7BWabRua%7D)

用户 A 喜欢：a b c

用户 B 喜欢：b c d

用户 C 喜欢：c d

喜欢一个物品的用户数为：

喜欢 a 的用户数：1

喜欢 b 的用户数：2

喜欢 c 的用户数：3

喜欢 d 的用户数：2

那么同时喜欢两个物品的用户数为：

喜欢 ab 的用户数：1

喜欢 ac 的用户数：1

喜欢 bc 的用户数：2

喜欢 dc 的用户数：2

物品相似度为：


ab 相似度为： 0.71

ac 相似度为：0.58

bc 相似度为：0.82

cd 相似度为： 0.82

如果某个用户对 a 的兴趣度为1，对 b 的兴趣度为2，那么预测他对 c，d 的兴趣度为：

C = 1 * 0.58 + 2 * 0.82 = 2.22

D = 0 

代码实现 [link](item_cf.py)


